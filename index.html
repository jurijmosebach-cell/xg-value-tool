<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Football xG Analyzer PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .match-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .match-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .top-section {
            margin-bottom: 2rem;
        }
        .loading-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .league-badge {
            position: relative;
            overflow: hidden;
        }
        
        .league-badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .league-badge:hover::before {
            left: 100%;
        }
        
        .tier-1 { border-left: 4px solid #10b981; }
        .tier-2 { border-left: 4px solid #3b82f6; }
        .continental { border-left: 4px solid #f59e0b; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Professional Header -->
        <header class="text-center mb-8">
            <div class="flex items-center justify-center space-x-4 mb-4">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-700 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-2xl">
                    ğŸ§ 
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent">
                        Professional xG Analyzer PRO
                    </h1>
                    <p class="text-gray-600 text-lg mt-2">KI-gestÃ¼tzte Wettanalyse mit echten Form- & H2H-Daten</p>
                </div>
            </div>
            
            <!-- Professional Stats Bar -->
            <div class="grid grid-cols-3 gap-6 max-w-3xl mx-auto mb-8">
                <div class="bg-white rounded-2xl p-5 text-center shadow-lg border border-gray-200">
                    <div class="text-sm text-gray-600 font-medium mb-2">KI Genauigkeit</div>
                    <div class="text-2xl font-bold text-green-600 loading-pulse" id="ai-accuracy">--%</div>
                    <div class="text-xs text-gray-500 mt-1">Professional Model</div>
                </div>
                <div class="bg-white rounded-2xl p-5 text-center shadow-lg border border-gray-200">
                    <div class="text-sm text-gray-600 font-medium mb-2">Analysierte Spiele</div>
                    <div class="text-2xl font-bold text-blue-600" id="total-games">--</div>
                    <div class="text-xs text-gray-500 mt-1">Echtzeit Tracking</div>
                </div>
                <div class="bg-white rounded-2xl p-5 text-center shadow-lg border border-gray-200">
                    <div class="text-sm text-gray-600 font-medium mb-2">VerfÃ¼gbare Ligen</div>
                    <div class="text-2xl font-bold text-purple-600" id="active-leagues">10</div>
                    <div class="text-xs text-gray-500 mt-1">Professionell unterstÃ¼tzt</div>
                </div>
            </div>
        </header>

        <!-- Professional Controls -->
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8 border border-gray-300">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 items-end">
                <!-- Date Selection -->
                <div>
                    <label class="block text-sm font-semibold text-gray-800 mb-3">
                        <span class="flex items-center space-x-3">
                            <span class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600">ğŸ“…</span>
                            <span>Spieltag Auswahl</span>
                        </span>
                    </label>
                    <input type="date" id="match-date" 
                           class="w-full border-2 border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 text-lg font-medium">
                </div>
                
                <!-- Professional League Selection -->
                <div class="lg:col-span-2">
                    <label class="block text-sm font-semibold text-gray-800 mb-3">
                        <span class="flex items-center space-x-3">
                            <span class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center text-green-600">ğŸ†</span>
                            <span>Professionelle Ligen Auswahl</span>
                        </span>
                    </label>
                    <select id="league-select" multiple
                            class="w-full border-2 border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-40 transition duration-200 text-lg font-medium">
                        
                        <!-- TIER 1 EUROPÃ„ISCHE TOP-LIGEN -->
                        <optgroup label="ğŸ‡ªğŸ‡º EuropÃ¤ische Top Ligen" class="tier-1">
                            <option value="soccer_epl">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Premier League (England)</option>
                            <option value="soccer_germany_bundesliga">ğŸ‡©ğŸ‡ª Bundesliga (Deutschland)</option>
                            <option value="soccer_spain_la_liga">ğŸ‡ªğŸ‡¸ La Liga (Spanien)</option>
                            <option value="soccer_italy_serie_a">ğŸ‡®ğŸ‡¹ Serie A (Italien)</option>
                            <option value="soccer_france_ligue_one">ğŸ‡«ğŸ‡· Ligue 1 (Frankreich)</option>
                            <option value="soccer_portugal_primeira_liga">ğŸ‡µğŸ‡¹ Primeira Liga (Portugal)</option>
                            <option value="soccer_netherlands_eredivisie">ğŸ‡³ğŸ‡± Eredivisie (Niederlande)</option>
                        </optgroup>
                        
                        <!-- CONTINENTAL WETTBEWERBE -->
                        <optgroup label="ğŸ† Europapokal" class="continental">
                            <option value="soccer_uefa_champs_league">â­ UEFA Champions League</option>
                        </optgroup>
                        
                        <!-- TIER 2 LIGEN -->
                        <optgroup label="âš½ Weitere Top Ligen" class="tier-2">
                            <option value="soccer_efl_champ">ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿ Championship (England)</option>
                            <option value="soccer_brazil_campeonato">ğŸ‡§ğŸ‡· BrasileirÃ£o SÃ©rie A (Brasilien)</option>
                        </optgroup>
                    </select>
                    <p class="text-sm text-gray-600 mt-3 font-medium">
                        âœ… <span class="text-green-600">10 professionelle Ligen</span> mit echten Form- & H2H-Daten verfÃ¼gbar
                    </p>
                </div>
                
                <!-- Professional Action Button -->
                <div>
                    <button id="refresh" 
                            class="w-full bg-gradient-to-r from-blue-700 to-purple-700 hover:from-blue-800 hover:to-purple-800 text-white font-bold py-4 px-8 rounded-2xl transition duration-200 transform hover:scale-105 shadow-2xl flex items-center justify-center space-x-3">
                        <span class="loading-pulse hidden" id="loading-spinner">â³</span>
                        <span id="button-text" class="text-lg">ğŸ§  Professional Analyse starten</span>
                    </button>
                    <p class="text-xs text-gray-500 text-center mt-3">
                        Echtzeit-Daten von Football-Data.org & Odds-API
                    </p>
                </div>
            </div>
            
            <!-- Professional Quick Selection -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center space-x-2">
                    <span>ğŸš€</span>
                    <span>Professionelle Liga-Presets</span>
                </h3>
                <div class="flex flex-wrap gap-3">
                    <button class="quick-select bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-6 py-3 rounded-xl transition duration-200 font-semibold shadow-lg flex items-center space-x-2" data-leagues="soccer_epl,soccer_germany_bundesliga,soccer_spain_la_liga,soccer_italy_serie_a,soccer_france_ligue_one">
                        <span>â­</span>
                        <span>Top 5 EuropÃ¤ische Ligen</span>
                    </button>
                    <button class="quick-select bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white px-6 py-3 rounded-xl transition duration-200 font-semibold shadow-lg flex items-center space-x-2" data-leagues="soccer_epl">
                        <span>ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿</span>
                        <span>Premier League</span>
                    </button>
                    <button class="quick-select bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white px-6 py-3 rounded-xl transition duration-200 font-semibold shadow-lg flex items-center space-x-2" data-leagues="soccer_germany_bundesliga">
                        <span>ğŸ‡©ğŸ‡ª</span>
                        <span>Bundesliga</span>
                    </button>
                    <button class="quick-select bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-xl transition duration-200 font-semibold shadow-lg flex items-center space-x-2" data-leagues="soccer_uefa_champs_league">
                        <span>ğŸ†</span>
                        <span>Champions League</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Professional Status -->
        <div id="status" class="text-center text-xl font-semibold text-gray-700 mb-8">
            <div class="flex items-center justify-center space-x-3 bg-white rounded-2xl py-4 px-6 shadow-lg border border-gray-300">
                <span class="text-2xl">ğŸ¤–</span>
                <span>Bereit fÃ¼r professionelle KI-Analyse</span>
            </div>
        </div>

        <!-- Professional Match List -->
        <div id="match-list" class="space-y-8">
            <!-- Content wird via JavaScript gefÃ¼llt -->
        </div>

        <!-- Professional Footer -->
        <footer class="mt-16 text-center text-gray-600">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
                    <div class="text-gray-700 font-semibold mb-2">ğŸ§  KI System</div>
                    <div class="text-lg font-bold text-gray-900">Professional Ensemble V3</div>
                    <div class="text-sm text-gray-500 mt-1">Echtzeit xG + Form Analyse</div>
                </div>
                <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
                    <div class="text-gray-700 font-semibold mb-2">ğŸ“Š Datenquellen</div>
                    <div class="text-lg font-bold text-gray-900">Football-Data.org</div>
                    <div class="text-sm text-gray-500 mt-1">Echte Form & H2H Daten</div>
                </div>
                <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
                    <div class="text-gray-700 font-semibold mb-2">âš¡ Updates</div>
                    <div class="text-lg font-bold text-gray-900">Echtzeit + Historisch</div>
                    <div class="text-sm text-gray-500 mt-1">Live Performance Tracking</div>
                </div>
                <div class="bg-white rounded-2xl p-6 shadow-lg border border-gray-200">
                    <div class="text-gray-700 font-semibold mb-2">ğŸŒ VerfÃ¼gbare Ligen</div>
                    <div class="text-lg font-bold text-gray-900">10 Professionelle</div>
                    <div class="text-sm text-gray-500 mt-1">Top EuropÃ¤ische + International</div>
                </div>
            </div>
            <p class="text-lg font-semibold">Professional Football xG Analyzer PRO â€¢ KI-gestÃ¼tzte Wettanalyse mit echten Daten</p>
            <p class="text-sm text-gray-500 mt-2">Datenquellen: The Odds API & Football-Data.org â€¢ Professional Ensemble KI Model</p>
        </footer>
    </div>

    <script>
        // Professional Quick Selection Funktion
        document.querySelectorAll('.quick-select').forEach(button => {
            button.addEventListener('click', function() {
                const leagues = this.getAttribute('data-leagues').split(',');
                const leagueSelect = document.getElementById('league-select');
                
                // Alle Optionen deselecten
                Array.from(leagueSelect.options).forEach(option => {
                    option.selected = false;
                });
                
                // GewÃ¼nschte Ligen selecten
                leagues.forEach(leagueKey => {
                    const option = Array.from(leagueSelect.options).find(opt => opt.value === leagueKey);
                    if (option) option.selected = true;
                });
                
                // Update Professional Active Leagues Anzeige
                updateProfessionalActiveLeaguesCount();
            });
        });

        // Professional Aktive Ligen ZÃ¤hler
        function updateProfessionalActiveLeaguesCount() {
            const selectedLeagues = Array.from(document.getElementById('league-select').selectedOptions);
            document.getElementById('active-leagues').textContent = selectedLeagues.length;
        }

        // Lade Professional Performance-Daten fÃ¼r Header
        async function loadProfessionalHeaderStats() {
            try {
                const response = await fetch('/api/performance/stats');
                const data = await response.json();
                
                if (data && data.overall) {
                    const accuracy = data.overall.accuracy || 0;
                    
                    document.getElementById('ai-accuracy').textContent = accuracy + '%';
                    document.getElementById('total-games').textContent = data.overall.total;
                    
                    // Entferne Loading Animation bei Erfolg
                    document.getElementById('ai-accuracy').classList.remove('loading-pulse');
                    
                    // FÃ¼ge Quality Badge hinzu
                    if (accuracy > 60) {
                        document.getElementById('ai-accuracy').classList.add('text-green-600');
                    }
                }
            } catch (error) {
                console.log('Professional Performance-Daten werden geladen...');
            }
        }

        // Professional Loading State fÃ¼r Button
        document.getElementById('refresh').addEventListener('click', function() {
            const button = this;
            const originalText = button.querySelector('#button-text').textContent;
            const spinner = button.querySelector('#loading-spinner');
            
            // Professional Loading State
            spinner.classList.remove('hidden');
            button.querySelector('#button-text').textContent = 'ğŸ§  Professionelle Analyse lÃ¤uft...';
            button.disabled = true;
            
            // Professional Timeout-Handling
            setTimeout(() => {
                if (!button.disabled) return;
                spinner.classList.add('hidden');
                button.querySelector('#button-text').textContent = originalText;
                button.disabled = false;
                document.getElementById('status').textContent = "Timeout - Bitte professionell erneut versuchen";
            }, 45000); // 45s Timeout fÃ¼r professionelle Analyse
        });

        // Professional Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            updateProfessionalActiveLeaguesCount();
            loadProfessionalHeaderStats();
            
            // Professional Liga-Ã„nderungen
            document.getElementById('league-select').addEventListener('change', updateProfessionalActiveLeaguesCount);
            
            // Setze heutiges Datum
            const today = new Date().toISOString().slice(0, 10);
            document.getElementById('match-date').value = today;
            
            console.log("âœ… Professional System initialisiert");
            console.log("ğŸ§  Model: PROFESSIONAL_ENSEMBLE_V3");
            console.log("ğŸ“Š VerfÃ¼gbare Ligen: 10 professionelle");
            console.log("ğŸŒ Datenquellen: Football-Data.org + Odds-API");
        });
    </script>

    <script src="app.js"></script>
</body>
</html>
